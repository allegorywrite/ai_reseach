# ドローンを対象としたLQRやMPCの実装について（保留中）

## 提起された課題

実機への実装を見据えると、
$$u_i = [F_i, M_{i,x}, M_{i,y}, M_{i,z}]^T$$
のように推力を直接入力する方法はドローンを不安定化させるばかりか、そもそもモーメント入力を受け入れる実験プラットフォームは存在しません。
近年一般的なのは多項式軌道表現による全状態(位置, 速度, 加速度)の同時入力ですが、MPCやLQRなどの手法において多項式軌道表現は親和性が低いようにも感じます。
実機実験を行っているCBF及びMPCに関するドローンの理論研究はどのように制御入力を設計しているのでしょうか。サーベイを求めます。

## 保留理由

この課題は、ドローンを対象としたCBF/MPCの実機実装に関する専門的な知識を必要とします。特に、理論研究で設計した制御入力（推力とモーメント）を実機に適用する際の変換方法や、実際の実験プラットフォームで利用可能な制御入力の種類について、詳細な情報が必要です。

そこで、サーベイリクエスト「ドローンを対象としたCBF/MPCの実機実装に関するサーベイ」（`doc/surveys/task_5/request.md`）を作成し、以下の点について調査を依頼しています：

1. **実機実験を行っているCBF/MPC研究の制御入力設計**
   - 実機ドローンを用いたCBF研究における制御入力の設計方法
   - 実機ドローンを用いたMPC研究における制御入力の設計方法
   - 階層的制御構造（高レベル制御と低レベル制御の分離）の実装例

2. **制御入力の種類と実装方法**
   - 直接的な制御入力（推力、モーメント）の実装例と課題
   - 間接的な制御入力（位置、速度、加速度の参照値）の実装例と利点
   - 多項式軌道表現とMPC/LQRの統合方法

3. **実験プラットフォームと制御フレームワーク**
   - 一般的なドローン実験プラットフォーム（PX4, ArduPilot, DJI SDKなど）の制御インターフェース
   - 各プラットフォームで利用可能な制御入力の種類と制約
   - 研究用ドローンプラットフォームにおけるCBF/MPCの実装例

4. **実機実装における課題と解決策**
   - 理論と実践のギャップ（モデル誤差、遅延、計算制約など）
   - 安全性確保のための追加的な措置（フェイルセーフ、バックアップ制御器など）
   - 計算効率とリアルタイム実装の工夫

## 今後の対応

サーベイの結果を待ち、ドローンを対象としたCBF/MPCの実機実装に関する理解を深めた上で、現在の理論研究を実機実験に向けて拡張・改良する予定です。特に、以下の点に注目して取り組む予定です：

1. 理論研究で設計した制御入力（推力とモーメント）を実機に適用する際の変換方法
2. 実際の実験プラットフォームで利用可能な制御入力の種類と制約
3. 多項式軌道表現とMPC/LQRを効果的に統合する方法
4. 実機実装における計算効率とリアルタイム性の確保方法

サーベイの結果が得られ次第、この課題に取り組み、実機実験に向けた制御入力設計の改良を行います。
