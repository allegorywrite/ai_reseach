# 研究進捗

## 現在の研究概要
研究テーマ：collaborative visual inertial system(CoVINS) における active perception

本研究では、複数のUAVによる協調的なvisual-inertial SLAMシステムにおいて、視野錐台の交差を維持するためのactive perceptionアプローチを提案する。特に、Control Barrier Functions (CBF)を用いて、エージェント間の視野錐台の交差を保証しながら、安全性（衝突回避）も同時に確保する制御手法の開発を目指している。

この研究の新規性は、以下の要素を統合する点にある：
1. 複数UAVによる協調的visual-inertial SLAM
2. 特徴量の共有視認性（feature co-visibility）を最大化するためのactive perception
3. CBFに基づく安全性保証と視野制約の統合

## 進捗

### 理論研究の基盤構築
Control Barrier Functions (CBF)に関する理論的な基盤を整理するため、`doc/theory/control_barrier_functions.md`を作成しました。このドキュメントでは、CBFの基本概念、定義、制御設計への応用、視野制約への適用、複数UAVの協調制御などについて体系的にまとめています。

### Consensus CBFの検討（Issue）
研究テーマにおいて、通常のCBFではなくConsensus-Based Control Barrier Function (CCBF)を適用することの意義や必要性について検討しました。現時点では、CCBFの詳細な理論や適用例について十分な情報がないため、追加のサーベイ（Task 2）を依頼し、結果を待っている状態です。

予備的な考察では、CCBFは複数のエージェント間でコンセンサス（合意）を形成しながらシステム全体の安全性を保証する手法であり、以下の点で研究テーマに有益である可能性があります：
- 分散制御の実現
- 通信制約への対応
- システム全体のロバスト性の向上

### サーベイ結果（Task 1）
サーベイの結果、提案する研究テーマと完全に一致する先行研究は見つからなかった。既存研究は以下の3つの領域に分類される：

1. **複数UAVによる協調的SLAM/VIO**
   - COVINSやCOVINS-G、Kimera-Multiなどの研究があるが、これらはパッシブなデータ収集を前提としており、視点計画のためのactive perceptionは考慮されていない
   - 本研究の新規性：SLAMフレームワークの上にactive perception層を追加し、UAVが意図的に重複する視野を持つように動作計画を行う点

2. **協調的Active PerceptionとSLAM**
   - 情報理論に基づく協調的active SLAMの研究は存在するが、特徴量の共有視認性（feature co-visibility）に焦点を当てたものは少ない
   - 本研究の新規性：情報理論的な目標ではなく、特徴量の共有視認性を明示的に最大化する計画手法を提案する点

3. **安全性重視制御（CBF）とビジョンベースのタスク**
   - 単一ロボットに対するCBFを用いた視野制約の研究は存在するが、複数ロボット間での共有視野維持にCBFを適用した研究は見当たらない
   - 本研究の新規性：複数UAV間での共有視野維持と衝突回避を同時に保証するCBFベースの制御手法を提案する点

これらの結果から、提案する研究テーマは十分な新規性を持ち、既存研究の延長線上にありながらも、未解決の重要な課題に取り組むものであることが確認された。

### CCBFの検討と理論研究

Task 2のサーベイ結果を受けて、Consensus-Based Control Barrier Function (CCBF)の研究テーマへの適用可能性を評価しました。その結果、CCBFは視野錐台交差維持という制約に対して非常に適していることが明らかになりました。

CCBFの主な利点：
- 分散システム全体の状態制約を扱える
- 局所通信のみで実現可能
- コンセンサスフィルタによる近似で全体状態を把握

また、CBFとCCBFを用いた場合のUAVの視野錐台交差制約付きMPC問題の定式化について理論研究を行いました。両アプローチを比較し、視野錐台交差制約のような協調を要する制約に対しては、CCBFアプローチの方が理論的に優れていることを示しました。

詳細な定式化は以下のドキュメントにまとめています：
- `doc/issue/consensus_CBF_solved.md`: CCBFの研究テーマへの適用意義
- `doc/theory/visual_cone_intersection_mpc.md`: CBFとCCBFを用いた視野錐台交差制約付きMPC問題の定式化

## 次やるべきこと

1. **理論的フレームワークの実装**
   - 定式化したCCBFベースの視野錐台交差制約付きMPC問題の実装
   - 数値シミュレーションによる検証

2. **シミュレーション環境の構築**
   - 複数UAVによるvisual-inertial SLAMのシミュレーション環境の準備
   - 提案手法の実装と基本的な動作検証

3. **比較実験の設計**
   - 通常のCBFとCCBFの性能比較実験の設計
   - パッシブなSLAM手法（COVINS等）との比較方法の検討
   - 評価指標（位置推定精度、マップ品質、計算コスト等）の設定

4. **実装上の課題への対応**
   - 通信遅延やパケットロスへの対策
   - 分散最適化のリアルタイム解法の検討
   - センサーノイズや外乱に対するロバスト性の向上

5. **追加サーベイの検討**
   - 分散最適化アルゴリズムに関するより詳細なサーベイ
   - 複数UAVの協調制御に関する最新研究の調査
